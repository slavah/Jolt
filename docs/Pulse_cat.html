<!DOCTYPE html>  <html> <head>   <title>Pulse_cat.coffee</title>   <meta http-equiv="content-type" content="text/html; charset=UTF-8">   <link rel="stylesheet" media="all" href="docco.css" /> </head> <body>   <div id="container">     <div id="background"></div>          <table cellpadding="0" cellspacing="0">       <thead>         <tr>           <th class="docs">             <h1>               Pulse_cat.coffee             </h1>           </th>           <th class="code">           </th>         </tr>       </thead>       <tbody>                               <tr id="section-1">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-1">&#182;</a>               </div>                            </td>             <td class="code">               <div class="highlight"><pre><span class="nv">Jolt.Pulse_cat = </span><span class="nx">Jolt</span><span class="p">.</span><span class="nx">Pulse_catch_and_trace</span> <span class="o">\</span>
<span class="o">=</span> <span class="nv">Pulse_cat = </span><span class="k">class</span> <span class="nx">Pulse_catch_and_trace</span> <span class="k">extends</span> <span class="nx">Pulse</span>

  <span class="nv">propagate: </span><span class="nf">(pulse, sender, receiver, high, isHeap, isCatch, isFinally) -&gt;</span>

    <span class="nv">HEAP = </span><span class="nx">pulse</span><span class="p">.</span><span class="nx">heap</span></pre></div>             </td>           </tr>                               <tr id="section-2">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-2">&#182;</a>               </div>               <p>wrong! not sure how to do this yet...</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nv">traceTime = </span><span class="mi">123</span>

    <span class="k">if</span> <span class="p">(</span><span class="o">not</span> <span class="nx">isHeap</span><span class="p">)</span> <span class="o">and</span> <span class="p">(</span><span class="o">not</span> <span class="nx">isCatch</span><span class="p">)</span> <span class="o">and</span> <span class="p">(</span><span class="o">not</span> <span class="nx">isFinally</span><span class="p">)</span>

      <span class="nv">timeStart = </span><span class="k">new</span> <span class="nb">Date</span>

      <span class="nv">stamp = </span><span class="nx">pulse</span><span class="p">.</span><span class="nx">stamp</span>

      <span class="nv">heapP = </span><span class="k">new</span> <span class="nx">Pulse_cat</span> <span class="mi">2</span><span class="p">,</span> <span class="o">\</span>
      <span class="kc">false</span><span class="p">,</span> <span class="o">\</span>
      <span class="nx">sender</span><span class="p">,</span> <span class="o">\</span>
      <span class="nx">stamp</span><span class="p">,</span> <span class="o">\</span>
      <span class="p">[</span><span class="s">&#39;start&#39;</span><span class="p">,</span> <span class="nx">timeStart</span><span class="p">],</span> <span class="o">\</span>
      <span class="k">new</span> <span class="nx">HeapStore</span> <span class="nx">stamp</span>

      <span class="nx">@constructor</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">propagate</span> <span class="nx">heapP</span><span class="p">,</span> <span class="o">\</span>
      <span class="nx">heapP</span><span class="p">.</span><span class="nx">sender</span><span class="p">,</span> <span class="o">\</span>
      <span class="nx">HEAP_E</span><span class="p">,</span> <span class="o">\</span>
      <span class="kc">true</span><span class="p">,</span> <span class="o">\</span>
      <span class="kc">true</span><span class="p">,</span> <span class="o">\</span>
      <span class="kc">false</span><span class="p">,</span> <span class="o">\</span>
      <span class="kc">false</span>

      <span class="nx">setPropagating</span> <span class="kc">true</span>

    <span class="k">else</span>
      <span class="s">&#39;do&#39;</span></pre></div>             </td>           </tr>                               <tr id="section-3">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-3">&#182;</a>               </div>               <p>mark the trace time for subtraction purposes</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nv">caught = </span><span class="kc">null</span>

    <span class="k">try</span>
      <span class="nv">HEAP = </span><span class="k">super</span> <span class="nx">pulse</span><span class="p">,</span> <span class="nx">sender</span><span class="p">,</span> <span class="nx">receiver</span><span class="p">,</span> <span class="nx">high</span><span class="p">,</span> <span class="nx">isHeap</span><span class="p">,</span> <span class="nx">isCatch</span><span class="p">,</span> <span class="nx">isFinally</span>

    <span class="k">catch</span> <span class="nx">error</span>
      <span class="nv">caught = </span><span class="nx">error</span>

    <span class="k">finally</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">not</span> <span class="nx">isHeap</span><span class="p">)</span> <span class="o">and</span> <span class="p">(</span><span class="o">not</span> <span class="nx">isCatch</span><span class="p">)</span> <span class="o">and</span> <span class="p">(</span><span class="o">not</span> <span class="nx">isFinally</span><span class="p">)</span>

        <span class="nv">timeEnd = </span><span class="k">new</span> <span class="nb">Date</span>

        <span class="nv">heapP = </span><span class="k">new</span> <span class="nx">Pulse_cat</span> <span class="mi">5</span><span class="p">,</span> <span class="o">\</span>
        <span class="kc">false</span><span class="p">,</span> <span class="o">\</span>
        <span class="nx">sender</span><span class="p">,</span> <span class="o">\</span>
        <span class="nx">stamp</span><span class="p">,</span> <span class="o">\</span>
        <span class="p">[</span><span class="s">&#39;end&#39;</span><span class="p">,</span> <span class="nx">timeEnd</span><span class="p">,</span> <span class="p">(</span><span class="nx">timeEnd</span> <span class="o">-</span> <span class="nx">timeStart</span><span class="p">),</span> <span class="nx">traceTime</span><span class="p">,</span> <span class="nx">HEAP</span><span class="p">],</span> <span class="o">\</span>
        <span class="k">new</span> <span class="nx">HeapStore</span> <span class="nx">stamp</span>

        <span class="nx">@constructor</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">propagate</span> <span class="nx">heapP</span><span class="p">,</span> <span class="o">\</span>
        <span class="nx">heapP</span><span class="p">.</span><span class="nx">sender</span><span class="p">,</span> <span class="o">\</span>
        <span class="nx">HEAP_E</span><span class="p">,</span> <span class="o">\</span>
        <span class="kc">true</span><span class="p">,</span> <span class="o">\</span>
        <span class="kc">true</span><span class="p">,</span> <span class="o">\</span>
        <span class="kc">false</span><span class="p">,</span> <span class="o">\</span>
        <span class="kc">false</span>

      <span class="k">else</span>
        <span class="s">&#39;do&#39;</span></pre></div>             </td>           </tr>                               <tr id="section-4">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-4">&#182;</a>               </div>               <p>mark the trace time for subtraction purposes</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="k">if</span> <span class="nx">caught</span>
        <span class="k">throw</span> <span class="nx">caught</span>

    <span class="nx">HEAP</span>


  <span class="nv">PROPAGATE: </span><span class="nf">(pulse, sender, receiver, high, isHeap, isCatch, isFinally) -&gt;</span>

    <span class="nv">caught = </span><span class="kc">false</span>

    <span class="nv">PULSE = </span><span class="kc">null</span>

    <span class="nv">timeNow = </span><span class="k">new</span> <span class="nb">Date</span>

    <span class="nv">fnames = </span><span class="p">[</span><span class="s">&#39;tranRCV&#39;</span><span class="p">,</span><span class="s">&#39;tranVAL&#39;</span><span class="p">,</span><span class="s">&#39;tranOUT&#39;</span><span class="p">]</span>

    <span class="nv">times = </span><span class="p">{}</span>

    <span class="k">try</span>
      <span class="nv">prePulse =</span>
        <span class="nv">arity: </span>   <span class="nx">pulse</span><span class="p">.</span><span class="nx">arity</span>
        <span class="nv">junction: </span><span class="nx">pulse</span><span class="p">.</span><span class="nx">junction</span>
        <span class="nv">stamp: </span>   <span class="nx">pulse</span><span class="p">.</span><span class="nx">stamp</span>
        <span class="nv">value: </span>  <span class="p">(</span><span class="nx">pulse</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nx">slice</span> <span class="mi">0</span><span class="p">)</span>

      <span class="nv">subs = </span><span class="p">{}</span>
      <span class="nx">subs</span><span class="p">[</span><span class="nx">fn</span><span class="p">]</span> <span class="o">=</span> <span class="nx">receiver</span><span class="p">[</span><span class="nx">fn</span><span class="p">]</span> <span class="k">for</span> <span class="nx">fn</span> <span class="k">in</span> <span class="nx">fnames</span>

      <span class="nv">doSub = </span><span class="nf">(fn) -&gt;</span>
        <span class="nx">receiver</span><span class="p">[</span><span class="nx">fn</span><span class="p">]</span> <span class="o">=</span> <span class="nf">(pulse) -&gt;</span>
          <span class="nv">t1 = </span><span class="p">(</span><span class="k">new</span> <span class="nb">Date</span><span class="p">).</span><span class="nx">valueOf</span><span class="p">()</span>
          <span class="nv">P = </span><span class="nx">subs</span><span class="p">[</span><span class="nx">fn</span><span class="p">].</span><span class="nx">call</span> <span class="nx">receiver</span><span class="p">,</span> <span class="nx">pulse</span>
          <span class="nx">times</span><span class="p">[</span><span class="nx">fn</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="k">new</span> <span class="nb">Date</span><span class="p">).</span><span class="nx">valueOf</span><span class="p">()</span> <span class="o">-</span> <span class="nx">t1</span>
          <span class="nx">P</span>
      <span class="nx">doSub</span> <span class="nx">fn</span> <span class="k">for</span> <span class="nx">fn</span> <span class="k">in</span> <span class="nx">fnames</span>

      <span class="nv">PULSE = </span><span class="nx">receiver</span><span class="p">.</span><span class="nx">UPDATER</span> <span class="nx">pulse</span>

      <span class="k">if</span> <span class="nx">PULSE</span> <span class="o">isnt</span> <span class="nx">doNotPropagate</span> <span class="o">and</span> <span class="o">not</span> <span class="p">(</span><span class="nx">isP</span> <span class="nx">PULSE</span><span class="p">)</span>
        <span class="nv">PULSE = </span><span class="kc">null</span>
        <span class="k">throw</span> <span class="s">&#39;receiver\&#39;s UPDATER did not return a pulse object&#39;</span>

    <span class="k">catch</span> <span class="nx">error</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">not</span> <span class="nx">isHeap</span><span class="p">)</span> <span class="o">and</span> <span class="p">(</span><span class="o">not</span> <span class="nx">isCatch</span><span class="p">)</span> <span class="o">and</span> <span class="p">(</span><span class="o">not</span> <span class="nx">isFinally</span><span class="p">)</span>
        <span class="nv">caught = </span><span class="kc">true</span>
        <span class="nv">stamp = </span><span class="nx">pulse</span><span class="p">.</span><span class="nx">stamp</span>

        <span class="nv">errP = </span><span class="k">new</span> <span class="nx">Pulse_cat</span> <span class="mi">5</span><span class="p">,</span> <span class="o">\</span>
        <span class="kc">false</span><span class="p">,</span> <span class="o">\</span>
        <span class="nx">receiver</span><span class="p">,</span> <span class="o">\</span>
        <span class="nx">stamp</span><span class="p">,</span> <span class="o">\</span>
        <span class="p">[</span><span class="nx">error</span><span class="p">,</span> <span class="nx">prePulse</span><span class="p">,</span> <span class="nx">sender</span><span class="p">,</span> <span class="nx">receiver</span><span class="p">,</span> <span class="nx">timeNow</span><span class="p">],</span> <span class="o">\</span>
        <span class="k">new</span> <span class="nx">HeapStore</span> <span class="nx">stamp</span>

        <span class="nx">@constructor</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">propagate</span> <span class="nx">errP</span><span class="p">,</span> <span class="o">\</span>
        <span class="nx">errP</span><span class="p">.</span><span class="nx">sender</span><span class="p">,</span> <span class="o">\</span>
        <span class="nx">CATCH_E</span><span class="p">,</span> <span class="o">\</span>
        <span class="kc">true</span><span class="p">,</span> <span class="o">\</span>
        <span class="kc">false</span><span class="p">,</span> <span class="o">\</span>
        <span class="kc">true</span><span class="p">,</span> <span class="o">\</span>
        <span class="kc">false</span>

        <span class="nx">setPropagating</span> <span class="kc">true</span>

      <span class="k">else</span>
        <span class="nx">setPropagating</span> <span class="kc">false</span>
        <span class="k">throw</span> <span class="nx">error</span>

    <span class="k">finally</span>
      <span class="nx">receiver</span><span class="p">[</span><span class="nx">fn</span><span class="p">]</span> <span class="o">=</span> <span class="nx">subs</span><span class="p">[</span><span class="nx">fn</span><span class="p">]</span> <span class="k">for</span> <span class="nx">fn</span> <span class="k">in</span> <span class="nx">fnames</span>

      <span class="k">if</span> <span class="p">(</span><span class="o">not</span> <span class="nx">isHeap</span><span class="p">)</span> <span class="o">and</span> <span class="p">(</span><span class="o">not</span> <span class="nx">isCatch</span><span class="p">)</span> <span class="o">and</span> <span class="p">(</span><span class="o">not</span> <span class="nx">isFinally</span><span class="p">)</span> <span class="o">and</span> <span class="p">(</span><span class="o">not</span> <span class="nx">caught</span><span class="p">)</span>
        <span class="nv">stamp = </span><span class="nx">pulse</span><span class="p">.</span><span class="nx">stamp</span>

        <span class="nv">finP = </span><span class="k">new</span> <span class="nx">Pulse_cat</span> <span class="mi">4</span><span class="p">,</span> <span class="o">\</span>
        <span class="kc">false</span><span class="p">,</span> <span class="o">\</span>
        <span class="nx">receiver</span><span class="p">,</span> <span class="o">\</span>
        <span class="nx">stamp</span><span class="p">,</span> <span class="o">\</span>
        <span class="p">[</span><span class="nx">prePulse</span><span class="p">,</span> <span class="nx">PULSE</span><span class="p">,</span> <span class="nx">sender</span><span class="p">,</span> <span class="nx">receiver</span><span class="p">,</span> <span class="nx">timeNow</span><span class="p">,</span> <span class="nx">times</span><span class="p">],</span> <span class="o">\</span>
        <span class="k">new</span> <span class="nx">HeapStore</span> <span class="nx">stamp</span>

        <span class="nx">@constructor</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">propagate</span> <span class="nx">finP</span><span class="p">,</span> <span class="o">\</span>
        <span class="nx">finP</span><span class="p">.</span><span class="nx">sender</span><span class="p">,</span> <span class="o">\</span>
        <span class="nx">FINALLY_E</span><span class="p">,</span> <span class="o">\</span>
        <span class="kc">true</span><span class="p">,</span> <span class="o">\</span>
        <span class="kc">false</span><span class="p">,</span> <span class="o">\</span>
        <span class="kc">false</span><span class="p">,</span> <span class="o">\</span>
        <span class="kc">true</span>

        <span class="nx">setPropagating</span> <span class="kc">true</span>

    <span class="nx">PULSE</span> <span class="o">?=</span> <span class="nx">doNotPropagate</span>


<span class="nv">Jolt.HEAP_E = HEAP_E = </span><span class="nx">internalE</span><span class="p">().</span><span class="nx">name</span><span class="p">(</span><span class="s">&#39;Jolt.HEAP_E&#39;</span><span class="p">).</span><span class="nx">PulseClass</span> <span class="nx">Pulse_cat</span>

<span class="nv">Jolt.CATCH_E = CATCH_E = </span><span class="nx">internalE</span><span class="p">().</span><span class="nx">name</span><span class="p">(</span><span class="s">&#39;Jolt.CATCH_E&#39;</span><span class="p">).</span><span class="nx">PulseClass</span> <span class="nx">Pulse_cat</span>

<span class="nv">Jolt.FINALLY_E = FINALLY_E = </span><span class="nx">internalE</span><span class="p">().</span><span class="nx">name</span><span class="p">(</span><span class="s">&#39;Jolt.FINALLY_E&#39;</span><span class="p">).</span><span class="nx">PulseClass</span> <span class="nx">Pulse_cat</span>


<span class="nv">Jolt.defaultHeapE = defaultHeapE = </span><span class="nx">HEAP_E</span><span class="p">.</span><span class="nx">mapE</span><span class="p">(</span><span class="nf">(where, timeNow, timeElapsed, traceTime, HEAP) -&gt;</span>
  <span class="k">switch</span> <span class="nx">where</span>
    <span class="k">when</span> <span class="s">&#39;start&#39;</span>
      <span class="nv">message = </span><span class="s">&quot;&quot;&quot;</span>
<span class="s">        ----HEAP-START----</span>
<span class="s">        </span><span class="si">#{</span><span class="nx">timeNow</span><span class="si">}</span><span class="s"></span>
<span class="s">        epoch: </span><span class="si">#{</span><span class="nx">timeNow</span><span class="p">.</span><span class="nx">valueOf</span><span class="p">()</span><span class="si">}</span><span class="s"></span>
<span class="s">      &quot;&quot;&quot;</span>
      <span class="nx">say</span> <span class="nx">message</span><span class="p">,</span> <span class="kc">false</span><span class="p">,</span> <span class="s">&#39;green&#39;</span>
    <span class="k">when</span> <span class="s">&#39;end&#39;</span>
      <span class="nv">message = </span><span class="s">&quot;&quot;&quot;</span>
<span class="s">        ----HEAP-END-----</span>
<span class="s">        </span><span class="si">#{</span><span class="nx">timeNow</span><span class="si">}</span><span class="s"></span>
<span class="s">        epoch:   </span><span class="si">#{</span><span class="nx">timeNow</span><span class="p">.</span><span class="nx">valueOf</span><span class="p">()</span><span class="si">}</span><span class="s"></span>
<span class="s">          (time in ms)</span>
<span class="s">        elapsed:  </span><span class="si">#{</span><span class="nx">timeElapsed</span><span class="si">}</span><span class="s"></span>
<span class="s">        trace:    </span><span class="si">#{</span><span class="mi">0</span><span class="si">}</span><span class="s"></span>
<span class="s">        est. net: </span><span class="si">#{</span><span class="mi">0</span><span class="si">}</span><span class="s"></span>
<span class="s">      &quot;&quot;&quot;</span>
      <span class="nx">say</span> <span class="nx">message</span><span class="p">,</span> <span class="kc">false</span><span class="p">,</span> <span class="s">&#39;blue&#39;</span>
<span class="p">).</span><span class="nx">name</span><span class="p">(</span><span class="s">&#39;Jolt.defaultHeapE&#39;</span><span class="p">).</span><span class="nx">PulseClass</span> <span class="nx">Pulse_cat</span>


<span class="nv">Jolt.defaultCatchE = defaultCatchE = </span><span class="nx">CATCH_E</span><span class="p">.</span><span class="nx">mapE</span><span class="p">(</span><span class="nf">(error, prePulse, sender, receiver, timeNow) -&gt;</span>
  <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">error</span><span class="p">)</span> <span class="o">is</span> <span class="s">&#39;string&#39;</span>
    <span class="nv">emsg = </span><span class="nx">error</span>
  <span class="k">else</span> <span class="k">if</span> <span class="nx">error</span><span class="p">.</span><span class="nx">message</span><span class="o">?</span>
    <span class="nv">emsg = </span><span class="nx">error</span><span class="p">.</span><span class="nx">message</span>
  <span class="k">else</span>
    <span class="nv">emsg = </span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span> <span class="nx">error</span>
  <span class="k">if</span> <span class="nx">emsg</span> <span class="o">is</span> <span class="s">&#39;&#39;</span> <span class="k">then</span> <span class="nv">emsg = </span><span class="s">&#39;undefined&#39;</span>
  <span class="nx">emsg</span> <span class="o">?=</span> <span class="s">&#39;undefined&#39;</span>

  <span class="nv">sName = </span><span class="nx">sender</span><span class="p">.</span><span class="nx">name</span><span class="p">()</span>
  <span class="nx">sName</span> <span class="o">?=</span> <span class="s">&#39;unnamed&#39;</span>
  <span class="nv">sClass = </span><span class="s">&#39;(&#39;</span> <span class="o">+</span> <span class="nx">sender</span><span class="p">.</span><span class="nx">ClassName</span> <span class="o">+</span> <span class="s">&#39;)&#39;</span>
  <span class="k">if</span> <span class="nx">sClass</span> <span class="o">is</span> <span class="s">&#39;(undefined)&#39;</span> <span class="k">then</span> <span class="nv">sClass = </span><span class="s">&#39;&#39;</span>

  <span class="nv">rName = </span><span class="nx">receiver</span><span class="p">.</span><span class="nx">name</span><span class="p">()</span>
  <span class="nx">rName</span> <span class="o">?=</span> <span class="s">&#39;unnamed&#39;</span>
  <span class="nv">rClass = </span><span class="s">&#39;(&#39;</span> <span class="o">+</span> <span class="nx">receiver</span><span class="p">.</span><span class="nx">ClassName</span> <span class="o">+</span> <span class="s">&#39;)&#39;</span>

  <span class="nv">message = </span><span class="s">&quot;&quot;&quot;</span>
<span class="s">    ------ERROR------</span>
<span class="s">    sender:    </span><span class="si">#{</span><span class="nx">sName</span><span class="si">}</span><span class="s">  </span><span class="si">#{</span><span class="nx">sClass</span><span class="si">}</span><span class="s"></span>
<span class="s">      rank:    </span><span class="si">#{</span><span class="nx">sender</span><span class="p">.</span><span class="nx">rank</span> <span class="o">or</span> <span class="s">&#39;n/a&#39;</span><span class="si">}</span><span class="s"></span>
<span class="s">      absRank: </span><span class="si">#{</span><span class="nx">sender</span><span class="p">.</span><span class="nx">absRank</span> <span class="o">or</span> <span class="s">&#39;n/a&#39;</span><span class="si">}</span><span class="s"></span>
<span class="s">    receiver:  </span><span class="si">#{</span><span class="nx">rName</span><span class="si">}</span><span class="s">  </span><span class="si">#{</span><span class="nx">rClass</span><span class="si">}</span><span class="s"></span>
<span class="s">      mode:    </span><span class="si">#{</span><span class="nx">receiver</span><span class="p">.</span><span class="nx">mode</span><span class="p">()</span><span class="si">}</span><span class="s"></span>
<span class="s">      nary:    </span><span class="si">#{</span><span class="nx">receiver</span><span class="p">.</span><span class="nx">isNary</span><span class="p">()</span><span class="si">}</span><span class="s"></span>
<span class="s">      rank:    </span><span class="si">#{</span><span class="nx">receiver</span><span class="p">.</span><span class="nx">rank</span><span class="si">}</span><span class="s"></span>
<span class="s">      absRank: </span><span class="si">#{</span><span class="nx">receiver</span><span class="p">.</span><span class="nx">absRank</span><span class="si">}</span><span class="s"></span>
<span class="s">    error:     </span><span class="si">#{</span><span class="nx">emsg</span><span class="si">}</span><span class="s"></span>
<span class="s">    ----RECV-PULSE---</span>
<span class="s">    arity:     </span><span class="si">#{</span><span class="nx">prePulse</span><span class="p">.</span><span class="nx">arity</span><span class="si">}</span><span class="s"></span>
<span class="s">    junction:  </span><span class="si">#{</span><span class="nx">prePulse</span><span class="p">.</span><span class="nx">junction</span><span class="si">}</span><span class="s"></span>
<span class="s">    stamp:     </span><span class="si">#{</span><span class="nx">prePulse</span><span class="p">.</span><span class="nx">stamp</span><span class="si">}</span><span class="s"></span>
<span class="s">    value:     </span><span class="si">#{</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span> <span class="nx">prePulse</span><span class="p">.</span><span class="nx">value</span><span class="si">}</span><span class="s"></span>
<span class="s">  &quot;&quot;&quot;</span>

  <span class="nx">say</span> <span class="nx">message</span><span class="p">,</span> <span class="kc">true</span>
<span class="p">).</span><span class="nx">name</span><span class="p">(</span><span class="s">&#39;Jolt.defaultCatchE&#39;</span><span class="p">).</span><span class="nx">PulseClass</span> <span class="nx">Pulse_cat</span>


<span class="nv">Jolt.defaultFinallyE = defaultFinallyE = </span><span class="nx">FINALLY_E</span><span class="p">.</span><span class="nx">mapE</span><span class="p">(</span><span class="nf">(prePulse, PULSE, sender, receiver, timeNow, times) -&gt;</span>
  <span class="nv">sName = </span><span class="nx">sender</span><span class="p">.</span><span class="nx">name</span><span class="p">()</span>
  <span class="nx">sName</span> <span class="o">?=</span> <span class="s">&#39;unnamed&#39;</span>
  <span class="nv">sClass = </span><span class="s">&#39;(&#39;</span> <span class="o">+</span> <span class="nx">sender</span><span class="p">.</span><span class="nx">ClassName</span> <span class="o">+</span> <span class="s">&#39;)&#39;</span>
  <span class="k">if</span> <span class="nx">sClass</span> <span class="o">is</span> <span class="s">&#39;(undefined)&#39;</span> <span class="k">then</span> <span class="nv">sClass = </span><span class="s">&#39;&#39;</span>

  <span class="nv">rName = </span><span class="nx">receiver</span><span class="p">.</span><span class="nx">name</span><span class="p">()</span>
  <span class="nx">rName</span> <span class="o">?=</span> <span class="s">&#39;unnamed&#39;</span>
  <span class="nv">rClass = </span><span class="s">&#39;(&#39;</span> <span class="o">+</span> <span class="nx">receiver</span><span class="p">.</span><span class="nx">ClassName</span> <span class="o">+</span> <span class="s">&#39;)&#39;</span>

  <span class="nv">message = </span><span class="s">&quot;&quot;&quot;</span>
<span class="s">    ------TRACE------</span>
<span class="s">    sender:    </span><span class="si">#{</span><span class="nx">sName</span><span class="si">}</span><span class="s">  </span><span class="si">#{</span><span class="nx">sClass</span><span class="si">}</span><span class="s"></span>
<span class="s">      rank:    </span><span class="si">#{</span><span class="nx">sender</span><span class="p">.</span><span class="nx">rank</span> <span class="o">or</span> <span class="s">&#39;n/a&#39;</span><span class="si">}</span><span class="s"></span>
<span class="s">      absRank: </span><span class="si">#{</span><span class="nx">sender</span><span class="p">.</span><span class="nx">absRank</span> <span class="o">or</span> <span class="s">&#39;n/a&#39;</span><span class="si">}</span><span class="s"></span>
<span class="s">    receiver:  </span><span class="si">#{</span><span class="nx">rName</span><span class="si">}</span><span class="s">  </span><span class="si">#{</span><span class="nx">rClass</span><span class="si">}</span><span class="s"></span>
<span class="s">      mode:    </span><span class="si">#{</span><span class="nx">receiver</span><span class="p">.</span><span class="nx">mode</span><span class="p">()</span><span class="si">}</span><span class="s"></span>
<span class="s">      nary:    </span><span class="si">#{</span><span class="nx">receiver</span><span class="p">.</span><span class="nx">isNary</span><span class="p">()</span><span class="si">}</span><span class="s"></span>
<span class="s">      rank:    </span><span class="si">#{</span><span class="nx">receiver</span><span class="p">.</span><span class="nx">rank</span><span class="si">}</span><span class="s"></span>
<span class="s">      absRank: </span><span class="si">#{</span><span class="nx">receiver</span><span class="p">.</span><span class="nx">absRank</span><span class="si">}</span><span class="s"></span>
<span class="s">    ----RCV-PULSE----</span>
<span class="s">    arity:     </span><span class="si">#{</span><span class="nx">prePulse</span><span class="p">.</span><span class="nx">arity</span><span class="si">}</span><span class="s"></span>
<span class="s">    junction:  </span><span class="si">#{</span><span class="nx">prePulse</span><span class="p">.</span><span class="nx">junction</span><span class="si">}</span><span class="s"></span>
<span class="s">    stamp:     </span><span class="si">#{</span><span class="nx">prePulse</span><span class="p">.</span><span class="nx">stamp</span><span class="si">}</span><span class="s"></span>
<span class="s">    value:     </span><span class="si">#{</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span> <span class="nx">prePulse</span><span class="p">.</span><span class="nx">value</span><span class="si">}</span><span class="s"></span>
<span class="s">    ----OUT-PULSE----</span>
<span class="s">    arity:     </span><span class="si">#{</span><span class="nx">PULSE</span><span class="p">.</span><span class="nx">arity</span><span class="si">}</span><span class="s"></span>
<span class="s">    junction:  </span><span class="si">#{</span><span class="nx">PULSE</span><span class="p">.</span><span class="nx">junction</span><span class="si">}</span><span class="s"></span>
<span class="s">    stamp:     </span><span class="si">#{</span><span class="nx">PULSE</span><span class="p">.</span><span class="nx">stamp</span><span class="si">}</span><span class="s"></span>
<span class="s">    value:     </span><span class="si">#{</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span> <span class="nx">PULSE</span><span class="p">.</span><span class="nx">value</span><span class="si">}</span><span class="s"></span>
<span class="s">    -----PROFILE-----</span>
<span class="s">      (time in ms)</span>
<span class="s">    tranRCV: </span><span class="si">#{</span><span class="nx">times</span><span class="p">.</span><span class="nx">tranRCV</span><span class="si">}</span><span class="s"></span>
<span class="s">    tranVAL: </span><span class="si">#{</span><span class="nx">times</span><span class="p">.</span><span class="nx">tranVAL</span><span class="si">}</span><span class="s"></span>
<span class="s">    tranOUT: </span><span class="si">#{</span><span class="nx">times</span><span class="p">.</span><span class="nx">tranOUT</span><span class="si">}</span><span class="s"></span>
<span class="s">  &quot;&quot;&quot;</span>

  <span class="nx">say</span> <span class="nx">message</span>
<span class="p">).</span><span class="nx">name</span><span class="p">(</span><span class="s">&#39;Jolt.defaultFinallyE&#39;</span><span class="p">).</span><span class="nx">PulseClass</span> <span class="nx">Pulse_cat</span>

</pre></div>             </td>           </tr>                </tbody>     </table>   </div> </body> </html> 